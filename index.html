<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Helios | Tool</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;400;500;600;800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="favicon.png"/>

    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22256%22 height=%22256%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 rx=%220%22 fill=%22%23ff7600%22></rect><path fill=%22%23fff%22 d=%22M6.89 62.34L0.57 62.34L0.57 39.07L6.89 39.07L6.89 48.16L15.25 48.16L15.25 39.07L21.57 39.07L21.57 62.34L15.25 62.34L15.25 53.25L6.89 53.25L6.89 62.34ZM33.02 62.66L33.02 62.66Q30.23 62.66 28.21 61.59Q26.19 60.51 25.11 58.49Q24.02 56.48 24.02 53.66L24.02 53.66Q24.02 50.95 25.11 48.93Q26.20 46.91 28.19 45.78Q30.18 44.66 32.89 44.66L32.89 44.66Q34.86 44.66 36.47 45.27Q38.07 45.89 39.20 47.05Q40.34 48.22 40.95 49.88Q41.57 51.53 41.57 53.61L41.57 53.61L41.57 55.07L25.98 55.07L25.98 51.61L35.80 51.61Q35.78 50.86 35.41 50.29Q35.05 49.72 34.43 49.39Q33.81 49.07 33.02 49.07L33.02 49.07Q32.26 49.07 31.63 49.39Q30.99 49.72 30.61 50.28Q30.23 50.85 30.20 51.61L30.20 51.61L30.20 55.34Q30.20 56.18 30.56 56.84Q30.91 57.50 31.57 57.88Q32.23 58.25 33.16 58.25L33.16 58.25Q33.81 58.25 34.35 58.07Q34.89 57.89 35.27 57.54Q35.66 57.19 35.84 56.70L35.84 56.70L41.57 56.70Q41.27 58.52 40.17 59.86Q39.07 61.19 37.26 61.93Q35.44 62.66 33.02 62.66ZM44.11 39.07L50.39 39.07L50.39 62.34L44.11 62.34L44.11 39.07ZM59.84 62.34L53.57 62.34L53.57 44.89L59.84 44.89L59.84 62.34ZM56.72 43.07L56.72 43.07Q55.43 43.07 54.52 42.23Q53.61 41.39 53.61 40.20L53.61 40.20Q53.61 39.02 54.52 38.18Q55.43 37.34 56.70 37.34L56.70 37.34Q57.99 37.34 58.89 38.18Q59.80 39.02 59.80 40.20L59.80 40.20Q59.80 41.39 58.89 42.23Q57.99 43.07 56.72 43.07ZM71.43 62.66L71.43 62.66Q68.59 62.66 66.57 61.53Q64.55 60.40 63.47 58.37Q62.39 56.34 62.39 53.66L62.39 53.66Q62.39 50.98 63.47 48.95Q64.55 46.92 66.57 45.79Q68.59 44.66 71.43 44.66L71.43 44.66Q74.27 44.66 76.30 45.79Q78.32 46.92 79.40 48.95Q80.48 50.98 80.48 53.66L80.48 53.66Q80.48 56.34 79.40 58.37Q78.32 60.40 76.30 61.53Q74.27 62.66 71.43 62.66ZM71.48 58.02L71.48 58.02Q72.27 58.02 72.85 57.49Q73.43 56.95 73.75 55.97Q74.07 54.98 74.07 53.61L74.07 53.61Q74.07 52.24 73.75 51.26Q73.43 50.27 72.85 49.74Q72.27 49.20 71.48 49.20L71.48 49.20Q70.64 49.20 70.03 49.74Q69.43 50.27 69.11 51.26Q68.80 52.24 68.80 53.61L68.80 53.61Q68.80 54.98 69.11 55.97Q69.43 56.95 70.03 57.49Q70.64 58.02 71.48 58.02ZM98.98 50.57L98.98 50.57L93.20 50.57Q93.16 50.03 92.83 49.65Q92.50 49.26 91.98 49.05Q91.47 48.84 90.84 48.84L90.84 48.84Q90.03 48.84 89.45 49.14Q88.88 49.43 88.89 49.98L88.89 49.98Q88.88 50.36 89.22 50.69Q89.57 51.02 90.57 51.20L90.57 51.20L94.11 51.84Q96.80 52.33 98.11 53.48Q99.42 54.64 99.43 56.57L99.43 56.57Q99.42 58.43 98.32 59.80Q97.23 61.17 95.34 61.91Q93.44 62.66 91.02 62.66L91.02 62.66Q87.02 62.66 84.77 61.02Q82.51 59.39 82.25 56.70L82.25 56.70L88.48 56.70Q88.60 57.53 89.30 57.98Q90 58.43 91.07 58.43L91.07 58.43Q91.93 58.43 92.49 58.14Q93.06 57.84 93.07 57.30L93.07 57.30Q93.06 56.80 92.57 56.50Q92.09 56.20 91.07 56.02L91.07 56.02L87.98 55.48Q85.31 55.01 83.98 53.70Q82.65 52.40 82.66 50.34L82.66 50.34Q82.65 48.52 83.62 47.26Q84.59 45.99 86.40 45.32Q88.22 44.66 90.70 44.66L90.70 44.66Q94.49 44.66 96.68 46.23Q98.86 47.80 98.98 50.57Z%22></path></svg>" />
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>
<body class="container-fluid">


    <nav class = "d-flex align-items-center justify-content-between p-5 flex-column flex-md-row">
        <a href = "">
            <div class = "full-logo">
              <img style = "width: 170px;" src = "logo-large.svg">
            </div>
          </a>

          <div class = "nav-links">
            <a href = ""> Home </a>
            <a href = ""> Contact </a>
            <a href = ""> About </a>
            <a href = ""> Tech </a>
          </div>
    </nav>
    
    <form class="search-section d-flex justify-content-center m-5" id="search-form">
        <div class="input-group d-flex justify-content-center w-50 text-center">
            <input type="text" name="address" class="form-control" placeholder="Kormanagala, Bangalore" aria-label="form" aria-describedby="form-addon" />
            <button type="submit" type="submit" class="input-group-text border-0" id="search-addon">
                <i class="fa fa-search m-2" aria-hidden="true"></i>
            </button> 
        </div>
    </form>


    
    <div class="info-cards d-flex row justify-content-evenly">
            <a class = "d-flex col-2 justify-content-evenly" data-bs-toggle="collapse" href="#collapseExample-sat" role="button" aria-expanded="false" aria-controls="collapseExample" onclick="smoothScroll(document.getElementById('sat-info-card'))">
                <div class="card d-flex justify-content-evenly bg-transparent shadow mb-5 bg-white rounded">
                    <img src="satellite.svg" class="card-img-top img_sat" alt="...">
                    <div class="card-body" style ="--bs-card-border-color: rgba(255, 255, 255, 0.825);">
                        <p class="h3 fw-bolder card-text">Satellite.</p>
                    </div>
                </div>
            </a>
            

            <a class = "d-flex col-2 justify-content-evenly" data-bs-toggle="collapse" href="#collapseExample-building" role="button" aria-expanded="false" aria-controls="collapseExample" onclick="smoothScroll(document.getElementById('build-info-card'))">
                <div class="card d-flex justify-content-evenly bg-transparent shadow mb-5 bg-white rounded">
                    <img src="building.jpg" class="card-img-top img_build" alt="...">
                    <div class="card-body">
                    <p class="h3 card-text fw-bolder">Building.</p>
                    </div>
                </div>
            </a>
            
        
            <a class = "d-flex col-2 justify-content-evenly" data-bs-toggle="collapse" href="#collapseExample-roads" role="button" aria-expanded="false" aria-controls="collapseExample" onclick="smoothScroll(document.getElementById('road-info-card'))">
                <div class="card d-flex justify-content-evenly bg-transparent shadow mb-5 bg-white rounded">
                    <img src="roads.svg" class="card-img-top img_road" alt="...">
                    <div class="card-body">
                        <p class="h3 card-text fw-bolder">Roads.</p>
                    </div>
                </div>
            </a>
            
        
            <a class = "d-flex col-2 justify-content-evenly" data-bs-toggle="collapse" href="#collapseExample-landmarks" role="button" aria-expanded="false" aria-controls="collapseExample" onclick="smoothScroll(document.getElementById('land-info-card'))">
                <div class="card d-flex justify-content-evenly bg-transparent shadow mb-5 bg-white rounded">
                    <img src="land_lake_map.svg" class="card-img-top img_land_lake" alt="...">
                    <div class="card-body">
                        <p class="h3 card-text fw-bolder">Landmarks.</p>
                    </div>
                </div>
            </a>
    </div>

    <div class="collapse" id="collapseExample-sat">
        <div class="card card-body bg-transparent p-5 m-5 d-flex flex-lg-row" id="sat-info-card">
          <div class="sat-image-card"> <img src="satellite.svg" class = "img_sat p-5" alt=""> </div>
          <div class="sat-info-card">
                <p class="h1 px-5 m-5" style = "font-size: 89px; font-weight: 800;">Satellite.</p>
                <p class="px-5 mx-5 fw-lighter">Image provided by Airbus Maxar under the MapBox API <br><br> Current Zoom level: <span style="font-weight: 500;">650 feet</span></p>
          </div>
        </div>
    </div>

    <div class="collapse" id="collapseExample-building">
        <div class="card card-body bg-transparent p-5 m-5 d-flex flex-lg-row" id="build-info-card">
            <div class="build-image-card m-5"><img src="building.jpg" class = "img_build" alt=""></div>
            <div class="sat-info-card">
                  <p class="h1 px-5 m-5" style = "font-size: 89px; font-weight: 800;">Building.</p>
                  <p class="px-5 mx-5 fw-lighter">Buildings Coverage Ratio (BCR) - is the ratio of the Building area divided by the total land (site) area.</span></p>
                  <p class="text-center fw-lighter" style="padding-top: 40px; margin: 0; padding-left: 45px;">Area of buildings </p>
                  <p class="text-center fw-lighter" style = "padding-bottom: 0; margin-bottom: 0;"> BCR =  ----------------------- </p>
                  <p class="text-center fw-lighter" style="margin: 0; padding-left: 45px;">Total Area of land </p>
                  <p class="p-5 m-5" style="font-weight: 500;">The area is deemed <span style="color: #FFA05A;">Overcrowded</span> due to BCR being 56%</p>
            </div>
        </div>
    </div>

    <div class="collapse" id="collapseExample-roads">
        <div class="card card-body bg-transparent p-5 m-5 d-flex flex-lg-row" id="road-info-card">
          <div class="road-image-card m-5"><img src="roads.svg" class = "img_road" alt=""></div>
          <div class="sat-info-card">
                <p class="h1 px-5 m-5" style = "font-size: 89px; font-weight: 800;">Roads.</p>
          </div>
        </div>
    </div>

    <div class="collapse" id="collapseExample-landmarks">
        <div class="card card-body bg-transparent p-5 m-5 d-flex flex-lg-row" id="land-info-card">
            <div class="land-lake-image-card m-5"><img src="land_lake_map.svg" class = "img_land_lake" alt=""></div>
            <div class="left-card d-flex flex-column">
                <p class="h1 px-5 m-5" style = "font-size: 89px; font-weight: 800;">Landmarks.</p>
                <div class="legend-card px-5 m-5">
                    <div class="row d-flex flex-lg-row">
                        <div class="column d-flex flex-lg-row">
                            <div class="colour-div"><img src = "Rectangle 28.png"></div>
                            <p class = "px-4">Commercial Area</p>
                        </div>
                    </div>

                    <div class="row d-flex flex-lg-row">
                        <div class="column d-flex flex-lg-row">
                            <div class="colour-div"><img src = "Rectangle 29.png"></div>
                            <p class = "px-4">Hospital Area</p>
                        </div>
                    </div>

                    <div class="row d-flex flex-lg-row">
                        <div class="column d-flex flex-lg-row">
                            <div class="colour-div"><img src = "Rectangle 30.png"></div>
                            <p class = "px-4">Airport</p>
                        </div>
                    </div>

                    <div class="row d-flex flex-lg-row">
                        <div class="column d-flex flex-lg-row">
                            <div class="colour-div"><img src = "Rectangle 31.png"></div>
                            <p class = "px-4">Water Body (Lakes, Rivers, etc)</p>
                        </div>
                    </div>

                    <div class="row d-flex flex-lg-row">
                        <div class="column d-flex flex-lg-row">
                            <div class="colour-div"><img src = "Rectangle 32.png"></div>
                            <p class = "px-4">Pitch (Stadiums, Courts, etc)</p>
                        </div>
                    </div>

                    <div class="row d-flex flex-lg-row">
                        <div class="column d-flex flex-lg-row">
                            <div class="colour-div"><img src = "Rectangle 33.png"></div>
                            <p class = "px-4">Parks (Grass Spread)</p>
                        </div>
                    </div>

                    <div class="row d-flex flex-lg-row">
                        <div class="column d-flex flex-lg-row">
                            <div class="colour-div"><img src = "Rectangle 34.png"></div>
                            <p class = "px-4">Agriculture</p>
                        </div>
                    </div>

                    <div class="row d-flex flex-lg-row">
                        <div class="column d-flex flex-lg-row">
                            <div class="colour-div"><img src = "Rectangle 35.png"></div>
                            <p class = "px-4">Educational Institutions (Schools, Colleges, etc)</p>
                        </div>
                    </div>

                    <div class="row d-flex flex-lg-row">
                        <div class="column d-flex flex-lg-row">
                            <div class="colour-div"><img src = "Rectangle 36.png"></div>
                            <p class = "px-4">Industrial</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!----------  Footer Start  ------------> 
  <div class = "footer">
    <div class = "footer-logo-links">
      <div class = "footer-logo">

        <img style = "width: 100px;" src = "logo.svg">

        <div class = "footer-logo-text">
          <h3 style = "margin:0"> Helios </h3>
          <p style = "margin:0; color:white; font-weight: 100; font-size:13"> We Observe, You Infer </p>
        </div>
        
      </div>

      <div class = "footer-links">
        <a href = ""> Home </a>
        <a href = ""> Contact </a>
        <a href = ""> About </a>
        <a href = ""> Tech </a>
      </div>
    </div>
    <p style = "text-align: center; color:white; font-weight: 100; font-size:13" > Copyright Â© 2023  </p>
  </div>
  
  <!----------  Footer End  ------------>
    


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" 
    crossorigin="anonymous"></script>
    <script src="https://use.fontawesome.com/5bb9e797e3.js"></script>

    <script>
        const GMAPS_TOKEN = "AIzaSyCHKhmukDqBHvTLNP4gGT2A50xOOLjqpW0";
        const MAPBOX_TOKEN = "pk.eyJ1IjoibW9yZ2FueXUxMzAyIiwiYSI6ImNsZWVkZ3k3bDBmeTMzdm1qdzVrNW42ZWQifQ.tRTRiUC7ZQpOGQxb-qetTA";
        
        const SAT_ID = "cl95yjczr000514mtcaz9zdus";
        const BUILD_ID = "clef8f9iq000f01pvsdlwhmta"; 
        const ROAD_ID = "cla5iei7f002114l73u4lhrf2";
        const LAND_LAKE_ID = "cl96kzbic001h14qj91rpzf35";
        
        const zoom = 16
        let img_sat_arr = document.getElementsByClassName("img_sat")
        let img_build_arr = document.getElementsByClassName("img_build")
        let img_road_arr = document.getElementsByClassName("img_road")
        let img_land_lake_arr = document.getElementsByClassName("img_land_lake")

        const form = document.querySelector("#search-form");

        
        function smoothScroll(targetDiv) { 
            targetDiv.scrollIntoView();
        }
        

        form.addEventListener("submit", async event => {
            // Stop the browser from doing its native form submission
            event.preventDefault();

            // Get the address from the form
            const form_data = new FormData(form);
            
            // Then get the coordinates for this address
            const params = {
                key: GMAPS_TOKEN,
                address: form_data.get("address")
            };

            // Send the request
            const gmaps_response = await fetch(`https://maps.googleapis.com/maps/api/geocode/json?${new URLSearchParams(params)}`)
                // Then Convert the response to JSON
                .then(res => res.json());

            // Then look through the JSON to get our coordinates
            const [lat, lon] = [
                gmaps_response.results[0].geometry.location.lat,
                gmaps_response.results[0].geometry.location.lng,
            ];

             //SATELLITE RETRIEVAL 
            // Then use that coordinates array to make a request to Mapbox
            let mapbox_response = await fetch(`https://api.mapbox.com/styles/v1/morganyu1302/${SAT_ID}/static/${lon},${lat},${zoom}/700x700?access_token=${MAPBOX_TOKEN}`)
                // Then Convert the response to a blob
                .then(res => res.blob());

            // Then make the Object URL and assign it to the image
            let img_url = URL.createObjectURL(mapbox_response);
            for (const img_el of img_sat_arr) {
                img_el.src = img_url;
            }


            //BUILDING RETRIEVAL 
            // Then use that coordinates array to make a request to Mapbox
            mapbox_response = await fetch(`https://api.mapbox.com/styles/v1/morganyu1302/${BUILD_ID}/static/${lon},${lat},${zoom}/700x700?access_token=${MAPBOX_TOKEN}`)
                // Then Convert the response to a blob
                .then(res => res.blob());

            // Then make the Object URL and assign it to the image
            img_url = URL.createObjectURL(mapbox_response);
            for (const img_el of img_build_arr) {
                img_el.src = img_url;
            }



            //ROAD RETRIEVAL 
            // Then use that coordinates array to make a request to Mapbox
            mapbox_response = await fetch(`https://api.mapbox.com/styles/v1/morganyu1302/${ROAD_ID}/static/${lon},${lat},${zoom}/700x700?access_token=${MAPBOX_TOKEN}`)
                // Then Convert the response to a blob
                .then(res => res.blob());

            // Then make the Object URL and assign it to the image
            img_url = URL.createObjectURL(mapbox_response);
            for (const img_el of img_road_arr) {
                img_el.src = img_url;
            }



            //LAND AND LAKE RETRIEVAL 
            // Then use that coordinates array to make a request to Mapbox
            mapbox_response = await fetch(`https://api.mapbox.com/styles/v1/morganyu1302/${LAND_LAKE_ID}/static/${lon},${lat},${zoom}/700x700?access_token=${MAPBOX_TOKEN}`)
                // Then Convert the response to a blob
                .then(res => res.blob());

            // Then make the Object URL and assign it to the image
            img_url = URL.createObjectURL(mapbox_response);
            for (const img_el of img_land_lake_arr) {
                img_el.src = img_url;
            }

        });



    </script>

</body>
</html>